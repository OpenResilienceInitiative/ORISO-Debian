# ---------------- General ----------------
spring.application.name=agency-service
spring.profiles.active=@activeSpringProfile@
spring.main.allow-bean-definition-overriding=true
spring.jpa.open-in-view=true
spring.jpa.hibernate.ddl-auto=none
spring.data.jpa.repositories.bootstrap-mode=default
spring.main.banner-mode=off
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration,org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration

# ---------------- Server ----------------
server.port=8084
server.host=http://localhost
app.base.url=http://localhost:8084

# ---------------- Matrix Synapse ----------------
# Use Kubernetes DNS names, e.g., http://matrix-synapse.caritas.svc.cluster.local:8008
# NOT hardcoded IPs like http://91.99.219.182:8008
matrix.api-url=${MATRIX_API_URL:}
matrix.registration-shared-secret=${MATRIX_REGISTRATION_SHARED_SECRET:}
matrix.server-name=${MATRIX_SERVER_NAME:}
matrix.admin-username=${MATRIX_ADMIN_USERNAME:}
matrix.admin-password=${MATRIX_ADMIN_PASSWORD:}

# ---------------- CORS ----------------
registration.cors.allowed.origins=
registration.cors.allowed.paths=

spring.web.locale=de_DE
spring.jackson.time-zone=Europe/Berlin

service.encryption.appkey=

# ---------------- Identity Management ----------------
identity.email-dummy-suffix=@beratungcaritas.de
identity.technical-user.username=ali
identity.technical-user.password=ali
identity.error-message-duplicated-email=User exists with same email
identity.error-message-duplicated-username=User exists with same username
identity.openid-connect-url=${app.base.url}/auth/realms/online-beratung/protocol/openid-connect
identity.otp-url=${app.base.url}/auth/realms/online-beratung/otp-config
identity.otp-allowed-for-users=false
identity.otp-allowed-for-consultants=false
identity.otp-allowed-for-single-tenant-admins=false
identity.otp-allowed-for-restricted-agency-admins=false
identity.otp-allowed-for-tenant-super-admins=false
identity.display-name-allowed-for-consultants=false

# ---------------- API Docs ----------------
springfox.docuTitle=Caritas Online Beratung: AgencyService
springfox.docuDescription=Provides a REST API service to provide user information and actions.
springfox.docuVersion=0.0.1
springfox.docuTermsUrl=
springfox.docuContactName=
springfox.docuContactUrl=
springfox.docuContactEmail=
springfox.docuLicense=Apache 2.0
springfox.docuLicenseUrl=http://www.apache.org/licenses/LICENSE-2.0.html
springfox.docuPath=/agencies/docs

# ---------------- App Service URLs ----------------
agency.service.api.url=${app.base.url}/service
agency.service.api.get.agencies=${agency.service.api.url}/
agency.admin.service.api.url=${app.base.url}
# Use Kubernetes DNS names, e.g., http://consultingtypeservice.caritas.svc.cluster.local:8083
consulting.type.service.api.url=${CONSULTING_TYPE_SERVICE_API_URL:}
live.service.api.url=${LIVE_SERVICE_API_URL:${app.base.url}/service/liveevent}
appointment.service.api.url=${APPOINTMENT_SERVICE_API_URL:}
tenant.service.api.url=${TENANT_SERVICE_API_URL:}

# ---------------- Cache ----------------
cache.agencies.configuration.maxEntriesLocalHeap=100
cache.agencies.configuration.eternal=false
cache.agencies.configuration.timeToIdleSeconds=0
cache.agencies.configuration.timeToLiveSeconds=10800

cache.consulting.type.configuration.maxEntriesLocalHeap=100
cache.consulting.type.configuration.eternal=false
cache.consulting.type.configuration.timeToIdleSeconds=0
cache.consulting.type.configuration.timeToLiveSeconds=86400

cache.tenant.configuration.maxEntriesLocalHeap=100
cache.tenant.configuration.eternal=false
cache.tenant.configuration.timeToIdleSeconds=0
cache.tenant.configuration.timeToLiveSeconds=86400

cache.topic.configuration.maxEntriesLocalHeap=100
cache.topic.configuration.eternal=false
cache.topic.configuration.timeToIdleSeconds=0
cache.topic.configuration.timeToLiveSeconds=60

cache.appsettings.configuration.maxEntriesLocalHeap=100
cache.appsettings.configuration.eternal=false
cache.appsettings.configuration.timeToIdleSeconds=0
cache.appsettings.configuration.timeToLiveSeconds=60

# ---------------- Keycloak ----------------
# Use Kubernetes DNS names, e.g., http://keycloak.caritas.svc.cluster.local:8080
# NOT hardcoded IPs like http://10.43.63.186:8080
keycloak.auth-server-url=${KEYCLOAK_AUTH_SERVER_URL:}
keycloak.realm=${KEYCLOAK_REALM:}
keycloak.bearer-only=true
keycloak.resource=agency-service
keycloak.principal-attribute=preferred_username
keycloak.cors=false
keycloak.config.admin-username=technical
keycloak.config.admin-password=technical
keycloak.config.admin-client-id=admin-cli
keycloak.config.app-client-id=app

# ---------------- MariaDB ----------------
# Configuration must be provided via ConfigMap/Secrets (environment variables)
# Use Kubernetes DNS names, e.g., jdbc:mariadb://mariadb.caritas.svc.cluster.local:3306/agencyservice
# NOT hardcoded IPs like jdbc:mariadb://10.43.123.72:3306/agencyservice
spring.datasource.url=${SPRING_DATASOURCE_URL:}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=8
spring.datasource.hikari.idle-timeout=500000
spring.datasource.hikari.maxLifetime=500000
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MariaDB103Dialect
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.hibernate.ddl-auto=validate

# ---------------- Liquibase ----------------
spring.liquibase.enabled=false
# Database schemas are managed separately in ORISO-Database repository

# ---------------- Spring Boot MongoDB connection ----------------
# Use Kubernetes DNS names, e.g., mongodb://mongodb.caritas.svc.cluster.local:27017/agencyservice
# NOT hardcoded IPs like mongodb://10.43.61.124:27017/agencyservice
spring.data.mongodb.uri=${SPRING_DATA_MONGODB_URI:}

# ---------------- Appointments & Features ----------------
appointments.delete-job-cron=0 0 0 * * ?
appointments.delete-job-enabled=false
appointments.lifespan-in-hours=24
feature.topics.enabled=true
feature.demographics.enabled=false
feature.appointment.enabled=false
feature.multitenancy.with.single.domain.enabled=false
multitenancy.enabled=false


# ---------------- Actuator ----------------
management.endpoint.health.enabled=true
management.endpoint.health.show-details=always
management.endpoints.web.exposure.include=health,loggers
management.endpoint.health.probes.enabled=true
management.endpoint.loggers.enabled=true

# ---------------- Zipkin / Sleuth ----------------
spring.zipkin.baseUrl=
spring.sleuth.sampler.percentage=1.0
spring.zipkin.sender.type=web

# ---------------- Thread / Task Executor ----------------
thread.executor.corePoolSize=10
thread.executor.maxPoolSize=15
thread.executor.queueCapacity=500
thread.executor.threadNamePrefix=AgencyService-

# Use Kubernetes DNS names, e.g., http://userservice.caritas.svc.cluster.local:8082
user.admin.service.api.url=${USER_ADMIN_SERVICE_API_URL:}

# ---------------- CSRF ----------------
csrf.header.property=
csrf.cookie.property=
csrf.whitelist.adminUris=
csrf.whitelist.configUris=
csrf.whitelist.header.property=
