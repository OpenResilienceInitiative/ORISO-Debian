# ---------------- Logging ----------------
server.port=8084
logging.level.root=INFO
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate=ERROR
logging.level.org.springframework.web.servlet.mvc.method.annotation=DEBUG

# ---------------- Keycloak ----------------
# Use Kubernetes DNS names, e.g., http://keycloak.caritas.svc.cluster.local:8080
keycloak.auth-server-url=${KEYCLOAK_AUTH_SERVER_URL:}
keycloak.realm=${KEYCLOAK_REALM:}
keycloak.bearer-only=true
keycloak.resource=app
keycloak.principal-attribute=preferred_username
keycloak.cors=false
keycloak.use-resource-role-mappings=false
keycloak.config.admin-username=${KEYCLOAK_CONFIG_ADMIN_USERNAME:}
keycloak.config.admin-password=${KEYCLOAK_CONFIG_ADMIN_PASSWORD:}
keycloak.config.admin-client-id=admin-cli
keycloak.config.app-client-id=app

# ---------------- Spring Security (JWT Resource Server) ----------------
# Use Kubernetes DNS names, e.g., http://keycloak.caritas.svc.cluster.local:8080/realms/online-beratung
spring.security.oauth2.resourceserver.jwt.issuer-uri=${SPRING_SECURITY_OAUTH2_RESOURCESERVER_JWT_ISSUER_URI:}
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${SPRING_SECURITY_OAUTH2_RESOURCESERVER_JWT_JWK_SET_URI:}

# ---------------- MariaDB ----------------
# Use Kubernetes DNS names, e.g., jdbc:mariadb://mariadb.caritas.svc.cluster.local:3306/agencyservice
# NOT hardcoded IPs like jdbc:mariadb://10.43.123.72:3306/agencyservice
spring.datasource.url=${SPRING_DATASOURCE_URL:}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=8
spring.datasource.hikari.idle-timeout=500000
spring.datasource.hikari.maxLifetime=500000
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MariaDB103Dialect
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.hibernate.ddl-auto=validate

# ---------------- Liquibase ----------------
spring.liquibase.enabled=false
# Database already exists, skip Liquibase migration

# ---------------- Local App Settings ----------------
app.base.url=http://localhost:8084
multitenancy.enabled=false
tenant.service.api.url=${TENANT_SERVICE_API_URL:}

# ---------------- Matrix Synapse ----------------
# Use Kubernetes DNS names, e.g., http://matrix-synapse.caritas.svc.cluster.local:8008
# NOT hardcoded IPs like http://91.99.219.182:8008
matrix.api-url=${MATRIX_API_URL:}
matrix.registration-shared-secret=${MATRIX_REGISTRATION_SHARED_SECRET:}
matrix.server-name=${MATRIX_SERVER_NAME:}
matrix.admin-username=${MATRIX_ADMIN_USERNAME:}
matrix.admin-password=${MATRIX_ADMIN_PASSWORD:}

# ---------------- Appointments & Features ----------------
appointments.delete-job-cron=0 0 0 * * ?
appointments.delete-job-enabled=false
appointments.lifespan-in-hours=24
feature.topics.enabled=true
feature.demographics.enabled=false
feature.appointment.enabled=false
feature.multitenancy.with.single.domain.enabled=false

# ---------------- Schedulers ----------------
# Provide a valid cron to satisfy @Scheduled placeholder; runs daily at 03:00
agency.deleteworkflow.cron=0 0 3 * * ?

# ---------------- Rocket.Chat ----------------
# Use Kubernetes DNS names, e.g., http://rocketchat.caritas.svc.cluster.local:3000/api/v1
rocket-chat.base-url=${ROCKET_CHAT_BASE_URL:}
rocket-chat.mongo-url=${ROCKET_CHAT_MONGO_URL:}
rocket.technical.username=${ROCKET_TECHNICAL_USERNAME:}
rocket.technical.password=${ROCKET_TECHNICAL_PASSWORD:}
rocket-chat.credential-cron=0 0 * * * ?

user.admin.service.api.url=${USER_ADMIN_SERVICE_API_URL:}

# ---------------- Caching ----------------
cache.consulting.type.configuration.maxEntriesLocalHeap=1000
cache.consulting.type.configuration.eternal=false
cache.consulting.type.configuration.timeToIdleSeconds=300
cache.consulting.type.configuration.timeToLiveSeconds=600

cache.tenant.configuration.maxEntriesLocalHeap=1000
cache.tenant.configuration.eternal=false
cache.tenant.configuration.timeToIdleSeconds=300
cache.tenant.configuration.timeToLiveSeconds=600

cache.topic.configuration.maxEntriesLocalHeap=1000
cache.topic.configuration.eternal=false
cache.topic.configuration.timeToIdleSeconds=300
cache.topic.configuration.timeToLiveSeconds=600

cache.applicationsettings.configuration.maxEntriesLocalHeap=100
cache.applicationsettings.configuration.eternal=false
cache.applicationsettings.configuration.timeToIdleSeconds=300
cache.applicationsettings.configuration.timeToLiveSeconds=600
keycloak.ssl-required=none
