# ---------------- General ----------------
spring.application.name=consulting-type-service
app.base.url=${APP_BASE_URL:http://localhost:8083}
spring.profiles.active=local

# ---------------- MariaDB ----------------
# Configuration must be provided via ConfigMap/Secrets (environment variables)
# Use Kubernetes DNS names, e.g., jdbc:mariadb://mariadb.caritas.svc.cluster.local:3306/consultingtypeservice
# NOT hardcoded IPs like jdbc:mariadb://10.43.123.72:3306/consultingtypeservice
spring.datasource.url=${SPRING_DATASOURCE_URL:}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=8
spring.datasource.hikari.idle-timeout=500000
spring.datasource.hikari.maxLifetime=500000
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MariaDB103Dialect
spring.jpa.hibernate.ddl-auto=validate

# ---------------- Liquibase ----------------
spring.liquibase.enabled=false
# Database schemas are managed separately in ORISO-Database repository
spring.main.allow-bean-definition-overriding=true
spring.jpa.open-in-view=false
spring.jpa.hibernate.ddl-auto=none
spring.data.jpa.repositories.bootstrap-mode=default
spring.jpa.properties.hibernate.ejb.interceptor=de.caritas.cob.consultingtypeservice.api.service.TenantHibernateInterceptor

# ---------------- Server ----------------
server.port=8083
spring.web.locale=de_DE
spring.jackson.time-zone=Europe/Berlin
spring.mustache.enable=false
spring.mustache.cache=false
spring.mustache.check-template-location=false

# ---------------- Logging ----------------
logging.file.name=log/consultingtypeservice.log

# ---------------- Springfox / API docs ----------------
springfox.docuTitle=Caritas Online Beratung: ConsultingTypeService
springfox.docuDescription=Provides a REST API service to provide user information and actions.
springfox.docuVersion=0.0.1
springfox.docuLicense=Apache 2.0
springfox.docuLicenseUrl=http://www.apache.org/licenses/LICENSE-2.0.html
springfox.docuPath=/consultingtypes/docs

# ---------------- Consulting type JSON ----------------
consulting.types.json.path=consulting-type-settings
consulting.types.json.schema.file=/schemas/consulting-type.json

# ---------------- CSRF ----------------
csrf.header.property=X-CSRF-Token
csrf.cookie.property=CSRF-TOKEN

# ---------------- Cache ----------------
cache.tenant.configuration.maxEntriesLocalHeap=100
cache.tenant.configuration.eternal=false
cache.tenant.configuration.timeToIdleSeconds=0
cache.tenant.configuration.timeToLiveSeconds=86400

cache.groups.configuration.maxEntriesLocalHeap=100
cache.groups.configuration.eternal=false
cache.groups.configuration.timeToIdleSeconds=0
cache.groups.configuration.timeToLiveSeconds=900

# ---------------- MongoDB ----------------
# Use Kubernetes DNS names, e.g., mongodb://mongodb.caritas.svc.cluster.local:27017/consulting_types?retryWrites=false
# NOT hardcoded IPs like mongodb://10.43.61.124:27017/consulting_types
spring.data.mongodb.uri=${SPRING_DATA_MONGODB_URI:}

# ---------------- JWT Security ----------------
# Use Kubernetes DNS names, e.g., http://keycloak.caritas.svc.cluster.local:8080/realms/online-beratung
spring.security.oauth2.resourceserver.jwt.issuer-uri=${SPRING_SECURITY_OAUTH2_RESOURCESERVER_JWT_ISSUER_URI:}

# ---------------- Keycloak ----------------
# Use Kubernetes DNS names, e.g., http://keycloak.caritas.svc.cluster.local:8080
# NOT hardcoded IPs like http://10.43.63.186:8080
keycloak.auth-server-url=${KEYCLOAK_AUTH_SERVER_URL:}
keycloak.realm=${KEYCLOAK_REALM:}
keycloak.bearer-only=true
keycloak.resource=consulting-type-service
keycloak.principal-attribute=preferred_username
keycloak.cors=true

# ---------------- Multitenancy ----------------

# Multitenancy
multitenancy.enabled=false
# Use Kubernetes DNS names, e.g., http://tenantservice.caritas.svc.cluster.local:8081
tenant.service.api.url=${TENANT_SERVICE_API_URL:}
feature.multitenancy.with.single.domain.enabled=false
setting.main.tenant.subdomain.for.single.domain.multitenancy=app

# ---------------- Management / Health ----------------
management.endpoint.health.enabled=true
management.endpoint.health.show-details=always
management.endpoints.web.exposure.include=health
management.endpoint.health.probes.enabled=true

# ---------------- Distributed tracing ----------------
spring.zipkin.enabled=false
spring.sleuth.enabled=false
spring.zipkin.baseUrl=
spring.sleuth.sampler.percentage=1.0
spring.zipkin.sender.type=web
